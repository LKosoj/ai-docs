# Изменения с последней генерации

## Добавленные файлы

- нет
## Изменённые файлы

- ai_docs/generator.py
- ai_docs/mkdocs.py
## Удалённые файлы

- нет
## Перегенерированные разделы

- Тестирование
- Модули
- Конфигурация проекта
- Архитектура
- Запуск и окружение
- Соглашения
- Глоссарий
- Зависимости
- Документация проекта

## Краткое резюме

Модуль автоматизирует создание и поддержку технической документации на основе структуры проекта с использованием LLM и MkDocs. Все сгенерированные файлы размещаются в директории `.ai-docs`, а финальный сайт — в `ai_docs_site`.

## Основные изменения и функции

- **Генерация `mkdocs.yml`**  
  Функция `build_mkdocs_yaml` формирует валидный конфигурационный файл для MkDocs с поддержкой:
  - Настраиваемых разделов: архитектура, тестирование, зависимости.
  - Автоматической навигации через `project_config_nav_paths` и `module_nav_paths`.
  - Поддержки Mermaid-диаграмм через `pymdownx.superfences` (включены JS-скрипты).
  - Кастомной сериализации Python-объектов в YAML с помощью `_YamlPythonName` и `_YamlSafeDumper`.
  - Локального режима (`local_site`) — корректировка путей и URL для запуска без развёртывания.

- **Запись файлов документации**  
  Функция `write_docs_files` сохраняет Markdown-файлы в указанную директорию, создавая промежуточные подкаталоги при необходимости. Обеспечивает чистоту структуры и актуальность контента.

- **Структура документации**  
  Автоматически формируются:
  - `README.md` — краткое описание проекта.
  - `index.md` и `_index.json` — оглавление и метаданные навигации.
  - Детальные страницы по модулям, конфигурациям (Kubernetes, Helm, Terraform и др.) и тестам.

- **Оптимизация и управление**  
  - Кэширование через `CacheManager` и `llm_cache` — избегание повторной обработки.
  - Поддержка `force` и `use_cache` — контроль перегенерации.
  - Ограничение токенов (`input_budget`) и обрезка контекста (`_truncate_context`) — стабильность LLM-запросов.
  - Параллельная обработка файлов (настраиваемое число потоков, макс. 4 для секций).

- **Интеграция и совместимость**  
  - Поддержка мультиформатных конфигов: TOML, JSON, YAML.
  - Локализованные заголовки через `SECTION_TITLES` и `DOMAIN_TITLES`.
  - Автоопределение тестовых команд (`pytest`, `npm test`) и инфраструктурных доменов.

## Итог
Модуль обеспечивает:
- Актуальную, структурированную документацию в Markdown.
- Полностью автоматизированную сборку под MkDocs.
- Поддержку визуализаций (Mermaid), кэширование, локализацию и отказоустойчивость.
- Простое развертывание и локальное тестирование.
