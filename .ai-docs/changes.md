# Изменения с последней генерации

## Добавленные файлы

- нет
## Изменённые файлы

- README.md
- ai_docs/summary.py
## Удалённые файлы

- ai-docs-visual-philosophy-v2.md
- ai-docs-visual-philosophy-v3.md
- ai-docs-visual-philosophy-v4.md
- ai-docs-visual-philosophy.md
## Перегенерированные разделы

- Модули
- Запуск и окружение
- Зависимости
- Архитектура
- Соглашения
- Глоссарий
- Документация проекта

## Краткое резюме

```markdown
## Краткое резюме изменений

Внесённые изменения направлены на улучшение процесса генерации технической документации с помощью CLI-инструмента `ai_docs`. Основные обновления затрагивают модуль `summarize.py`, отвечающий за анализ исходных файлов и создание описаний с использованием LLM.

### Ключевые изменения:
- **Разделение промптов**: Введены два шаблона промптов:
  - `SUMMARY_PROMPT` — для кратких описаний файлов.
  - `MODULE_SUMMARY_PROMPT` — для детализированной документации в стиле Doxygen, используется при генерации модульной документации.
- **Поддержка контекста**: Параметр `domains` в `summarize_file()` позволяет дополнять промпты информацией о технологическом стеке (Kubernetes, Terraform и др.), повышая точность генерации.
- **Инкрементальная обработка**: Реализовано кэширование LLM-ответов через `llm_cache`, что снижает количество повторных запросов и ускоряет перегенерацию.
- **Адаптивное дробление текста**: Текст файлов разбивается на чанки до `1800` токенов с учётом `model`, что предотвращает превышение лимитов контекста.
- **Безопасное именование**: Результаты сохраняются через `write_summary()` с нормализацией имён файлов, исключая ошибки в путях.

### Практическое влияние:
- Ускорение генерации за счёт кэширования и параллелизации (управляется через `AI_DOCS_THREADS`).
- Повышенная точность описаний для инфраструктурных файлов (Helm, Terraform, CI/CD и др.).
- Гибкость вывода: поддержка кратких (`--readme`) и подробных (`--mkdocs`) режимов через флаг `detailed`.

Изменения полностью интегрированы в существующий пайплайн и совместимы с локальными и удалёнными репозиториями, включая корректную обработку `.gitignore` и `.build_ignore`.
```
