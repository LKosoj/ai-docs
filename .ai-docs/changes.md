# Изменения с последней генерации

## Добавленные файлы

- нет
## Изменённые файлы

- ai_docs/mkdocs.py
## Удалённые файлы

- нет
## Перегенерированные разделы

- Тестирование
- Модули
- Конфигурация проекта
- Архитектура
- Соглашения
- Зависимости
- Запуск и окружение
- Глоссарий
- Документация проекта

## Краткое резюме

Файл реализует программную генерацию конфигурации `mkdocs.yml` и подготовку файлов документации для последующей сборки сайта с помощью MkDocs.

## Основные возможности

- **Генерация `mkdocs.yml`**: Функция `build_mkdocs_yaml` создаёт валидный YAML-конфиг на основе входных параметров:
  - Указывается `site_name`, директории `docs_dir` (по умолчанию `.ai-docs`) и `site_dir` (по умолчанию `ai_docs_site`).
  - Автоматически подключаются плагины: `search`, `mermaid2` (для отрисовки диаграмм).
  - Включены расширения Markdown: `pymdownx.*`, `admonition`, `attr_list` — для продвинутого форматирования.

- **Динамическая навигация**: Секция `nav` формируется динамически:
  - Включаются стандартные разделы: *Главная*, *Архитектура*, *Запуск*.
  - При наличии добавляются специализированные секции: *Kubernetes*, *Helm*, *CI/CD* и др.
  - Поддержка модулей и конфигураций проекта — отображаются как отдельные пункты.
  - Учитываются дополнительные пути навигации, переданные пользователем.

- **Локальный режим**: При активации флага `local_site=True` конфиг настраивается для локального просмотра (без публикации).

- **Построение иерархии навигации**: Вспомогательные функции:
  - `_build_tree_nav` — строит дерево из списка путей.
  - `_insert_nav_node` — вставляет узел в дерево с учётом вложенности.
  - `_tree_to_nav` — преобразует дерево в формат `nav` для MkDocs.
  - Поддержка группировки: имена файлов с `__` (например, `api__auth.md`) трактуются как вложенность: `API > Авторизация`.

- **Запись файлов документации**: Функция `write_docs_files`:
  - Принимает словарь `{путь: содержимое}`.
  - Создаёт необходимые поддиректории в указанной папке (обычно `docs_dir`).
  - Записывает файлы, обеспечивая корректную структуру контента перед сборкой.

## Практическое применение

Используется для автоматической подготовки полного комплекта документации:
1. Сгенерировать `mkdocs.yml` с нужной структурой.
2. Записать `.md`-файлы в `docs_dir`.
3. Запустить `mkdocs build` — сайт будет собран с правильной навигацией и оформлением.
