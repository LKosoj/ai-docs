# Зависимости

## Основные зависимости

Зависимости `ai_docs` определены в `pyproject.toml` и включают минимальный набор пакетов для работы с LLM, анализом кода и генерацией документации:

```toml
[project]
dependencies = [
    "openai>=1.0.0",
    "pyyaml",
    "mkdocs",
    "mkdocs-material",
    "mkdocs-mermaid2-plugin",
    "tiktoken",
    "pathspec",
    "httpx"
]
```

- **`openai`** — клиент для взаимодействия с LLM (OpenAI или совместимые API).
- **`pyyaml`** — парсинг и запись `.ai-docs.yaml`.
- **`mkdocs` + `mkdocs-material`** — генерация статического сайта документации.
- **`mkdocs-mermaid2-plugin`** — визуализация диаграмм в Markdown.
- **`tiktoken`** — точный подсчёт токенов для моделей OpenAI.
- **`pathspec`** — обработка правил из `.gitignore`, `.build_ignore`.
- **`httpx`** — асинхронные HTTP-запросы в `LLMClient`.

## Установка

```bash
pip install ai-docs-gen
```

Или для разработки:

```bash
pip install -e .
```

## Локальные зависимости (для разработки)

В `pyproject.toml` не указаны, но требуются для разработки:

- `pytest` — запуск тестов.
- `black`, `isort`, `flake8` — форматирование и линтинг.
- `mkdocs-serve` — локальный просмотр документации.

Пример установки:

```bash
pip install pytest black isort flake8
```

## Управление зависимостями

- Все зависимости объявлены явно в `pyproject.toml`.
- Нет вложенных или динамических зависимостей.
- Кэширование LLM (`llm_cache.json`) не зависит от внешних БД — хранится в файловой системе.
- Поддержка сторонних OpenAI-совместимых API (через `OPENAI_BASE_URL`).

## Ограничения

- Минимальная версия Python: **3.8**.
- Максимальный размер файла для анализа: **200 КБ** (настраивается).
- Параллелизм ограничен `AI_DOCS_THREADS` (по умолчанию — количество ядер × 2).
