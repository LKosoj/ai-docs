# Зависимости

## Основные зависимости

Зависимости проекта определены в `pyproject.toml` и включают следующие ключевые пакеты:

- `openai` — для взаимодействия с LLM через OpenAI-совместимые API.
- `pyyaml` — для загрузки и обработки конфигурационных файлов `.ai-docs.yaml`.
- `mkdocs` — генерация статического сайта документации.
- `mkdocs-material` — тема оформления для MkDocs.
- `mkdocs-mermaid2-plugin` — поддержка визуализации диаграмм Mermaid в документации.
- `markdown` и `Pygments` — обработка синтаксиса и расширений Markdown.
- `tiktoken` — точный подсчёт токенов для моделей OpenAI (резервное побайтовое кодирование при отсутствии).
- `pathspec` — обработка правил из `.gitignore` и `.build_ignore`.

## Установка

Для установки зависимостей выполните:

```bash
pip install -e .
```

Или для установки в виртуальное окружение:

```bash
python -m venv .venv
source .venv/bin/activate  # Linux/macOS
# .venv\Scripts\activate   # Windows
pip install -e .
```

## Управление зависимостями

- Все зависимости объявлены в `project.dependencies` в `pyproject.toml`.
- Для разработки используются дополнительные зависимости (указаны в `tool.setuptools.extras_require`, если применимо).
- Сборка управляется через `setuptools` и `wheel`, указанные в `build-system.requires`.

## Особенности

- **Кэширование LLM-ответов** реализовано на уровне приложения с использованием `json`-файлов, не требует внешних хранилищ.
- **Mermaid.js** включён как статический ресурс (`assets/mermaid.min.js`) и автоматически интегрируется в сайт.
- **Поддержка асинхронности** обеспечивается через `asyncio` и `httpx`, встроенные в `openai`-клиент.
- **Параллелизм** управляется через `--threads` или переменную `AI_DOCS_THREADS`, без внешних брокеров.

## Требования к окружению

- Python ≥ 3.8
- `OPENAI_API_KEY` — обязательная переменная для доступа к LLM.
- Дополнительно: `OPENAI_BASE_URL` — для использования сторонних провайдеров (например, локальных LLM).

Зависимости автоматически устанавливаются при развёртывании пакета и не требуют ручной настройки.
