# Зависимости

Проект `ai_docs` использует комбинацию прямых зависимостей и встроенных ресурсов для обеспечения функциональности генерации документации, работы с LLM и управления файлами.

## Основные зависимости

Указаны в `pyproject.toml` в секции `project.dependencies`:

- **`tiktoken`** — для токенизации текста с учётом ограничений LLM (подсчёт токенов, разбиение на чанки).
- **`pathspec`** — обработка правил из `.gitignore`, `.build_ignore` и пользовательских шаблонов.
- **`python-dotenv`** — загрузка переменных окружения из `.env`.
- **`requests`** — выполнение HTTP-запросов к OpenAI-совместимым API.
- **`PyYAML`** — парсинг и генерация `mkdocs.yml`, `.ai-docs.yaml`.
- **`colorama`** — кроссплатформенная раскраска логов в терминале.

## Встроенные ресурсы

- **`mermaid.min.js`** — JS-библиотека для рендеринга диаграмм Mermaid, включается в пакет и копируется в `js/` при генерации MkDocs-сайта.
- Расположение: `ai_docs/assets/mermaid.min.js`.
- Подключается автоматически через плагин `mermaid2` в `mkdocs.yml`.

## Условные зависимости

- **Git** — требуется в `PATH` для клонирования удалённых репозиториев (`git clone`).
- **MkDocs** — необходим для сборки сайта (`mkdocs build`). Устанавливается отдельно, если используется флаг `--mkdocs`.

## Управление зависимостями

- Сборка и установка: `pip install .` или `pip install -e .` (для разработки).
- Зависимости для сборки: `setuptools>=68`, `wheel` — указаны в `build-system.requires`.
- Версия Python: **3.8+**.

## Переменные окружения

Критичные для работы:

| Переменная | Назначение | Обязательная |
|-----------|------------|-------------|
| `OPENAI_API_KEY` | Ключ для доступа к LLM | Да |
| `OPENAI_BASE_URL` | Базовый URL API (по умолчанию `https://api.openai.com/v1`) | Нет |
| `OPENAI_MODEL` | Модель LLM (по умолчанию `gpt-4o-mini`) | Нет |

Опциональные:

- `AI_DOCS_THREADS` — количество потоков обработки файлов.
- `AI_DOCS_LOCAL_SITE` — режим локальной сборки MkDocs без публикации.

## Локальные файлы конфигурации

- `.ai-docs.yaml` — кастомизация расширений, шаблонов включения/исключения.
- `.env` — загружается автоматически для переменных окружения.
- `.gitignore`, `.build_ignore` — используются для фильтрации файлов при сканировании.
