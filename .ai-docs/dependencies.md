# Зависимости

Инструмент `ai_docs` требует следующие зависимости для корректной работы. Установка осуществляется через `pip` на основе `pyproject.toml` или `requirements.txt`.

## Основные зависимости

| Пакет | Назначение | Версия (минимальная) |
|------|-----------|---------------------|
| `tiktoken` | Подсчёт и разбиение текста на токены в соответствии с кодировкой модели OpenAI | `>=0.7.0` |
| `PyYAML` | Сериализация и десериализация `mkdocs.yml` с поддержкой кириллицы и сложных структур | `>=6.0` |
| `requests` | Выполнение HTTP-запросов к OpenAI-совместимым API | `>=2.28.0` |
| `python-dotenv` | Загрузка переменных окружения из `.env` | `>=1.0.0` |
| `gitpython` | Работа с локальными и удалёнными git-репозиториями (клонирование, анализ состояния) | `>=3.1.40` |

## Опциональные зависимости

- `mkdocs` — требуется при использовании флага `--mkdocs` для локальной сборки и просмотра документации.
- `mkdocs-material` — рекомендуемый темплейт для визуально насыщенного отображения сайта документации.

## Переменные окружения

Критически важные параметры задаются через переменные окружения. Поддерживаются `.env`-файлы.

| Переменная | Обязательная | Назначение | Пример значения |
|-----------|-------------|-----------|----------------|
| `OPENAI_API_KEY` | Да | Ключ доступа к OpenAI или совместимому API | `sk-...` |
| `OPENAI_BASE_URL` | Нет | Базовый URL API (для кастомных эндпоинтов) | `https://api.openai.com/v1` |
| `OPENAI_MODEL` | Нет | Модель LLM по умолчанию | `gpt-4o-mini` |
| `OPENAI_TEMPERATURE` | Нет | Уровень креативности генерации (0.0 – детерминированно) | `0.2` |
| `OPENAI_MAX_TOKENS` | Нет | Макс. токенов в ответе | `1200` |
| `OPENAI_CONTEXT_TOKENS` | Нет | Общий лимит контекста модели | `8192` |
| `AI_DOCS_THREADS` | Нет | Количество потоков обработки файлов | `4` |
| `AI_DOCS_LOCAL_SITE` | Нет | Режим локального хостинга MkDocs (`true`/`false`) | `true` |

## Системные требования

- Python 3.9+
- Доступ в интернет (для вызова LLM API, клонирования репозиториев)
- Свободное место на диске: минимум 100 МБ для кэша (`.ai_docs_cache/`) и выходных артефактов

## Установка

```bash
pip install ai-docs
```

Или из исходников:

```bash
git clone https://github.com/example/ai_docs.git
cd ai_docs
pip install -e .
```

После установки доступна команда:
```bash
ai_docs --source ./my-project --mkdocs --language ru
```
