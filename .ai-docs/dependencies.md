# Зависимости

## Основные зависимости (runtime)

Для работы `ai_docs` требуются следующие пакеты, указанные в `pyproject.toml`:

| Пакет | Назначение |
|------|-----------|
| `requests` | HTTP-запросы к LLM API |
| `tiktoken` | Токенизация текста для расчёта длины контекста |
| `PyYAML` | Парсинг конфигурационных файлов `.ai-docs.yaml` |
| `python-dotenv` | Загрузка переменных окружения из `.env` |
| `mkdocs` | Генерация статического сайта документации |
| `mkdocs-mermaid2-plugin` | Поддержка диаграмм Mermaid в MkDocs |
| `pymdown-extensions` | Дополнительные Markdown-расширения (подсветка, таблицы и др.) |
| `pathspec` | Сопоставление путей с шаблонами `.gitignore` |

Установка:
```bash
pip install ai-docs-gen
```

## Системные зависимости

| Компонент | Требование | Проверка |
|---------|-----------|--------|
| `git` | Клонирование удалённых репозиториев | `git --version` |
| Python ≥ 3.8 | Минимальная версия интерпретатора | `python --version` |

## Опциональные зависимости (разработка)

Для участия в разработке установите дополнительные инструменты:

```bash
pip install -e .
```

Требуются для:
- Запуска тестов: `pytest`
- Сборки пакета: `setuptools>=68`, `wheel`
- Автоматической проверки кода: `flake8`, `black`, `mypy` (указаны в dev-секциях, если присутствуют)

## Управление зависимостями

- Все зависимости объявлены в `pyproject.toml`.
- Проект использует стандартный бэкенд `setuptools.build_meta`.
- Локальная установка с зависимостями: `pip install -e .`
- Сборка дистрибутива: `python -m build`

## Особенности использования

- **Кэширование LLM**: использует `tiktoken` для расчёта токенов и контроля контекста.
- **Работа с Git**: `git` обязателен только при указании `--source` как URL.
- **Фильтрация файлов**: `pathspec` обеспечивает совместимость с синтаксисом `.gitignore`.
- **Генерация сайта**: `mkdocs` и его плагины настраиваются автоматически при `--mkdocs`.
