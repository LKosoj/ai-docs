# Зависимости

```markdown
# Зависимости

## Основные внешние зависимости

Инструмент `ai_docs` требует следующие сторонние библиотеки для работы:

- **`tiktoken`** — для токенизации текста и управления лимитами контекста LLM. Используется в `tokenizer.py` для подсчёта токенов и разбиения файлов на чанки.
- **`requests`** — для HTTP-запросов к API LLM (например, OpenAI). Применяется в `llm.py` с таймаутами и обработкой ошибок.
- **`pathspec`** — для корректной обработки шаблонов `.gitignore` и `.build_ignore` в `scanner.py`.
- **`PyYAML`** — для генерации и сериализации `mkdocs.yml`.
- **`markdown` и `pymdownx.superfences`** — поддерживаются через MkDocs для рендеринга кода и диаграмм.

## Внутренние зависимости

Модули инструмента организованы в виде взаимосвязанной системы:

- `ai_docs.cli` — точка входа; зависит от:
  - `ai_docs.scanner` — сканирование файлов.
  - `ai_docs.llm` — взаимодействие с LLM.
  - `ai_docs.summarize` — генерация сводок.
  - `ai_docs.mkdocs` — сборка конфигурации и сайта.
  - `ai_docs.cache` — управление кэшем.
- `ai_docs.scanner` — зависит от:
  - `ai_docs.utils` — проверка бинарных файлов, нормализация путей.
  - `ai_docs.types` — классификация типов файлов и доменов.
- `ai_docs.summarize` — использует:
  - `ai_docs.llm` — для генерации описаний.
  - `ai_docs.tokenizer` — для разбиения больших файлов.
  - `ai_docs.utils` — безопасное именование файлов.
- `ai_docs.mkdocs` — зависит от:
  - `ai_docs.utils` — работа с путями и слагами.
  - `ai_docs.cache` — для отслеживания изменений при генерации навигации.

## Условные зависимости

- **Git** — требуется в `PATH`, если анализируется удалённый репозиторий по URL. Используется `git clone --depth 1`.
- **MkDocs** — необходим для сборки и просмотра сайта (`ai_docs_site/`). Устанавливается отдельно, если используется флаг `--mkdocs`.

## Тестовые зависимости

Для запуска юнит-тестов требуются:
- `unittest` — встроенный модуль Python.
- `tempfile` — изоляция тестовой среды.
- `json` — проверка структуры кэша.

## Управление зависимостями

Зависимости объявлены в `pyproject.toml` или `requirements.txt`. Рекомендуется использовать виртуальное окружение:

```bash
python -m venv .venv
source .venv/bin/activate  # Linux/macOS
# или
.venv\Scripts\activate     # Windows
pip install -r requirements.txt
```

Или установка как пакета:

```bash
pip install ai_docs
```
```
