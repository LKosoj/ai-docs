# Зависимости

Проект `ai_docs` зависит от набора библиотек и внешних инструментов, обеспечивающих работу анализа кода, взаимодействия с LLM, генерации документации и управления конфигурацией.

## Основные зависимости (из `pyproject.toml`)

| Пакет | Назначение |
|------|-----------|
| `requests` | HTTP-запросы к LLM API |
| `tiktoken` | Токенизация текста для расчёта длины контекста |
| `PyYAML` | Парсинг и запись YAML-конфигов (`.ai-docs.yaml`, `mkdocs.yml`) |
| `python-dotenv` | Загрузка переменных окружения из `.env` |
| `mkdocs` | Генерация статического сайта документации |
| `mkdocs-mermaid2-plugin` | Поддержка Mermaid-диаграмм в MkDocs |
| `pymdown-extensions` | Дополнительные Markdown-расширения (включая `superfences` для диаграмм) |

## Внешние инструменты

| Инструмент | Требуется для | Проверка |
|----------|---------------|---------|
| `git` | Клонирование удалённых репозиториев | Проверяется при запуске с `--source <URL>` |
| `pathspec` | Сопоставление путей с шаблонами `.gitignore` и `.build_ignore` | Устанавливается автоматически |

## Условные зависимости

- **Для разработки**:
  - `pytest` — запуск модульных тестов.
  - `setuptools`, `wheel` — сборка пакета (указаны в `build-system`).

## Управление зависимостями

Зависимости объявлены в `pyproject.toml`. Установка:

```bash
pip install -e .
```

Для разработки с тестами:

```bash
pip install -e .[dev]
```

> **Примечание**: Проект использует `setuptools` как бэкенд сборки. Убедитесь, что установлены актуальные версии `pip`, `setuptools` и `wheel`.

## Совместимость

- **Python**: 3.8+
- **LLM API**: OpenAI-совместимые эндпоинты (поддерживаются кастомные `base_url`)

## Кэширование и производительность

- Кэш LLM-ответов хранится в `.ai_docs_cache/llm_cache.json`.
- Индекс файлов — в `.ai-docs/index.json`.
- Кэширование ускоряет повторную генерацию; отключается флагом `--no-cache`.
