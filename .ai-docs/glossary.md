# Глоссарий

```markdown
## AI-документация (ai_docs)
Инструмент с открытым исходным кодом для автоматической генерации технической документации на основе анализа исходного кода и конфигураций с использованием языковых моделей (LLM). Поддерживает локальные и удалённые репозитории, кэширование, многопоточную обработку и интеграцию с MkDocs.

## LLM (Large Language Model)
Крупная языковая модель, используемая для генерации текста. В контексте `ai_docs` — модель, доступная через API (например, OpenAI), принимающая промпты и возвращающая описания, суммаризации и структурированные документы.

## `.env`
Конфигурационный файл, содержащий переменные окружения для настройки подключения к LLM и поведения инструмента. Создаётся на основе `.env.example`. Поддерживает параметры: `OPENAI_API_KEY`, `OPENAI_MODEL`, `AI_DOCS_THREADS` и другие.

## `LLMClient`
Класс, инкапсулирующий взаимодействие с API языковой модели. Поддерживает кэширование, потокобезопасность, чтение параметров из `.env` и отправку запросов в формате OpenAI. Используется для генерации документации по фрагментам кода.

## `scan_source`
Функция сканирования исходных файлов из локальной директории или Git-репозитория. Применяет фильтры включения/исключения, обрабатывает `.gitignore`, пропускает бинарные и игнорируемые файлы. Возвращает `ScanResult` с метаданными.

## `ScanResult`
Структура данных, содержащая результат сканирования: список файлов с путями, типами, доменами и хешами. Используется как вход для генерации документации.

## `CacheManager`
Класс управления кэшем. Хранит:
- `index.json` — хеши файлов и состояние документации,
- `llm_cache.json` — закэшированные ответы LLM.
Позволяет определить изменения в файлах (`diff_files`) и избежать повторной обработки.

## `chunk_text`
Функция разбиения текста на фрагменты (чанки) по заданному лимиту токенов. Используется при обработке больших файлов, чтобы уложиться в контекстные ограничения LLM.

## `tiktoken`
Библиотека OpenAI для токенизации текста. Используется в `ai_docs` для подсчёта токенов и разбиения на чанки с учётом специфики модели (например, `gpt-4o-mini`).

## `classify_type`
Функция определения типа файла (код, конфигурация, документация, инфраструктура и др.) на основе расширения, имени и пути. Используется для фильтрации и группировки в документации.

## `detect_domains`
Функция выявления доменов проекта (например, `kubernetes`, `docker`, `terraform`) по имени файла, пути и содержимому. Применяется для структурирования документации по технологическим зонам.

## `build_mkdocs_yaml`
Функция генерации конфигурационного файла `mkdocs.yml`. Формирует структуру навигации, включает плагины (`mermaid2`, `search`), настраивает Markdown-расширения и пути. Поддерживает локальный режим (`local_site`).

## `write_docs_files`
Утилита записи сгенерированных Markdown-файлов в указанную директорию. Создаёт структуру `.ai-docs/modules/`, `_index.json`, `README.md` и другие артефакты.

## `safe_slug`
Функция преобразования строки (например, пути к файлу) в безопасное имя файла: заменяет недопустимые символы на `_`, приводит к нижнему регистру, удаляет ведущие/завершающие подчёркивания.

## `is_binary_file`
Эвристическая проверка, является ли файл бинарным: анализирует первые 2048 байт на наличие нулевых значений. Используется для пропуска недокументируемых файлов.

## `format_changes_md`
Функция формирования отчёта об изменениях в Markdown. Группирует файлы по типу изменений (добавлен, изменён, удалён), включает перегенерированные разделы и краткое резюме.

## `documentary` (скил)
Режим работы ассистента, ориентированный на использование существующей документации из `.ai-docs`. Запрещает прямой анализ кода без предварительной навигации через `_index.json` и `.md`-файлы. Требует актуальной документации.

## `--no-cache`
CLI-флаг, отключающий использование кэша LLM и файлов. Принудительно перегенерирует все описания, даже если они уже были закэшированы.

## `AI_DOCS_LOCAL_SITE`
Переменная окружения, указывающая на локальное развертывание документации. Влияет на генерацию `mkdocs.yml`: отключает `site_url` и `use_directory_urls`.

## `rel_path`, `safe_name`
- `rel_path` — относительный путь к файлу в проекте.
- `safe_name` — преобразованное имя файла для использования в качестве имени документа (через `safe_slug`).
```
