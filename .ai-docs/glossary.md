# Глоссарий

- **`ai_docs`** — CLI-инструмент для автоматической генерации технической документации по исходному коду и конфигурационным файлам. Поддерживает анализ локальных и Git-репозиториев, генерацию `README.md` и MkDocs-сайта.

- **`ScanResult`** — объект, возвращаемый сканером, содержащий проанализированные файлы с метаданными: путь, размер, тип, домены, первые 4000 символов содержимого, корневой путь и имя репозитория.

- **`file_map`** — внутренняя структура данных, хранящая хеши, типы, размеры и метаданные файлов. Используется для отслеживания изменений и инкрементальной обработки.

- **`llm_cache`** — кэш LLM-ответов, сохраняемый в `llm_cache.json`. Позволяет избежать повторных запросов к модели при неизменённых входных данных.

- **`CacheManager`** — класс, управляющий файловым кэшем: отслеживает состояние файлов (`index.json`), кэширует ответы LLM, определяет изменения (added/modified/deleted/unchanged).

- **`diff_files`** — метод `CacheManager`, сравнивающий текущее состояние файлов с предыдущим. Возвращает четыре категории файлов по изменению хешей.

- **`summarize_file`** — асинхронная функция генерации аннотации для файла с использованием LLM. Поддерживает кэширование и режимы: модульный (`module`) или файловый.

- **`SUMMARY_PROMPT`, `MODULE_SUMMARY_PROMPT`, `CONFIG_SUMMARY_PROMPT`** — шаблоны промптов для генерации сводок. Выбираются в зависимости от типа файла и режима обработки.

- **`build_hierarchical_context`** — функция, укладывающая контекст в лимит токенов через иерархическое суммирование. Используется при обработке больших проектов.

- **`_index.json`** — навигационный индекс в `.ai-docs/`, содержащий маршруты, приоритеты и метаданные страниц. Определяет структуру и порядок отображения документации.

- **`modules/`, `configs/`** — поддиректории в `.ai-docs/`, содержащие сгенерированные описания модулей и конфигурационных файлов. Поддерживают пагинацию (по 100 элементов) и навигацию.

- **`changes.md`** — файл в `docs/`, фиксирующий изменения после генерации: добавленные, изменённые, удалённые файлы, перегенерированные разделы и итоговое резюме.

- **`mermaid2`** — плагин MkDocs для визуализации диаграмм. Интегрирован в `mkdocs.yml` и поддерживает отображение архитектуры проекта.

- **`build_mkdocs_yaml`** — функция генерации `mkdocs.yml` с динамической навигацией, включая разделы: архитектура, зависимости, тестирование, глоссарий, модули, конфиги.

- **`AI_DOCS_REGEN`** — переменная окружения или флаг `--regen`, указывающий, какие разделы документации перегенерировать принудительно (например, `architecture,configs`).

- **`threads` / `AI_DOCS_THREADS`** — параметр, определяющий количество параллельных потоков обработки файлов. Ускоряет генерацию в многопоточном режиме.

- **`.ai-docs.yaml`** — конфигурационный файл для кастомизации сканирования: расширения кода/документации/конфигов, пользовательские шаблоны исключений (`exclude`).

- **`FIXED_INCLUDE_PATTERNS`, `DEFAULT_EXCLUDE_PATTERNS`** — встроенные шаблоны включения и исключения файлов при сканировании (например, `Dockerfile`, `.git`, `node_modules`).

- **`classify_type`, `detect_domains`** — утилиты для определения типа файла (код, конфиг, документация) и домена инфраструктуры (Kubernetes, Terraform, CI/CD и др.) по расширению и пути.

- **`LLMClient`** — асинхронный клиент для взаимодействия с LLM через OpenAI-совместимое API. Поддерживает кэширование, повторные попытки, динамический таймаут и `httpx`.

- **`chunk_text`** — функция разбиения текста на части по лимиту токенов. Использует `tiktoken` или резервное побайтовое кодирование.

- **`write_docs`, `write_readme`, `build_mkdocs`** — основные функции вывода: запись Markdown-файлов, генерация `README.md`, сборка сайта через `mkdocs build`.

- **`local_site` / `AI_DOCS_LOCAL_SITE`** — режим генерации для локального хостинга: настраивает `mkdocs.yml` с `site_url: /` и `use_directory_urls: false`.
