# Глоссарий

Словарь ключевых терминов, используемых в системе `ai_docs` для генерации технической документации.

---

## **LLM (Large Language Model)**  
Модель крупного языка, используемая для генерации текста документации. В `ai_docs` поддерживается через OpenAI-совместимое API.  
- **Пример**: `gpt-4o-mini`  
- **Настройка**: через переменные окружения `OPENAI_MODEL`, `OPENAI_API_KEY`, `OPENAI_BASE_URL`  
- **Использование**: анализ кода, генерация описаний модулей, конфигураций, архитектуры

---

## **Кэширование (Caching)**  
Механизм сохранения промежуточных результатов (LLM-ответов, метаданных файлов) для ускорения последующих запусков.  
- **Каталог**: `.ai_docs_cache/`  
- **Файлы**:  
  - `index.json` — хэши и метаданные файлов  
  - `llm_cache.json` — закэшированные ответы LLM  
- **Управление**: `--no-cache`, `--cache-dir`, `use_cache`  
- **Очистка**: автоматическая при удалении/изменении файлов

---

## **ScanResult**  
Объект, содержащий результат сканирования исходного кода. Включает:  
- Список файлов с метаданными (путь, размер, тип, домен)  
- Первые 4000 символов содержимого (для анализа)  
- Корневой путь и имя репозитория  
- Используется как вход для генерации документации

---

## **Домен (Domain)**  
Классификация файла по технологическому стеку. Определяется по расширению, имени или пути.  
- **Поддерживаемые домены**:  
  - `kubernetes`, `helm`, `terraform`, `ansible`, `docker`, `ci_cd`, `monitoring`, `service_mesh`, `data_storage`  
- **Источники определения**:  
  - `CODE_EXTENSIONS`, `CONFIG_EXTENSIONS`, `CI_FILENAMES`, `DOCKER_FILENAMES`  
  - Пользовательские правила в `.ai-docs.yaml`

---

## **Промежуточные директории (Intermediate Directories)**  
Каталоги для хранения временных результатов обработки:  
- `.ai_docs_cache/intermediate/files` — резюме файлов  
- `.ai_docs_cache/intermediate/modules` — описания модулей  
- `.ai_docs_cache/intermediate/configs` — описания конфигураций  
- Используются при инкрементальной генерации

---

## **`.ai-docs/`**  
Выходная директория с полной технической документацией. Содержит:  
- `modules/`, `configs/` — детальные описания компонентов  
- `index.md`, `architecture.md`, `dependencies.md` — основные разделы  
- `changes.md` — отчёт об изменениях  
- `_index.json` — навигационный индекс с приоритетами и структурой

---

## **`mkdocs.yml`**  
Конфигурационный файл для генерации статического сайта документации.  
- Генерируется автоматически  
- Поддерживает навигацию по модулям, конфигурациям, доменам  
- Включает плагин `mermaid2` для визуализации диаграмм  
- Режим `local_site` адаптирует пути для локального запуска

---

## **Mermaid.js**  
Инструмент для отрисовки диаграмм в Markdown.  
- Поддерживается через встроенный `mermaid.min.js`  
- Диаграммы генерируются в разделе "Архитектура"  
- Постобработка HTML заменяет `&gt;` на `>` для корректного отображения

---

## **Пагинация**  
Автоматическое разделение списков при превышении 100 элементов.  
- Применяется к спискам модулей и конфигураций  
- Обеспечивает производительность и читаемость  
- Реализована через построение древовидной навигации

---

## **`--regen`**  
CLI-флаг для принудительной перегенерации разделов.  
- Допустимые значения: `configs`, `modules`, `architecture`, `all`  
- Используется при значительных изменениях в коде  
- Перезаписывает только указанные разделы

---

## **`file_map`**  
Внутренняя структура данных, содержащая метаданные всех файлов:  
- Хэш, размер, тип (код/конфиг/документация)  
- Домены, содержимое (обрезанное)  
- Используется для сравнения изменений (`diff_files`)

---

## **`diff_files`**  
Функция сравнения текущего состояния файлов с закэшированным. Возвращает:  
- `added` — новые файлы  
- `modified` — изменённые  
- `deleted` — удалённые  
- `unchanged` — без изменений  
- Основа для инкрементальной обработки

---

## **`summarize_file`**  
Основная функция генерации описания файла.  
- Использует LLM и кэширование  
- Поддерживает режимы: `detailed`, `module`, `config`  
- Применяет специализированные промпты (например, `MODULE_SUMMARY_PROMPT`)

---

## **`.ai-docs.yaml`**  
Пользовательский конфигурационный файл. Поддерживает:  
- `code_extensions`, `doc_extensions`, `config_extensions` — кастомные расширения  
- `exclude` — дополнительные пути для исключения  
- Создаётся автоматически при отсутствии

---

## **`AI_DOCS_REGEN_ALL_THRESHOLD`**  
Порог (по умолчанию 50), при котором при изменении менее N модулей выполняется полная перегенерация вместо инкрементальной.
