# ai_docs/mkdocs

Модуль предоставляет инструменты для генерации конфигурационного файла `mkdocs.yml` и записи Markdown-документов в файловую систему. Основная функция `build_mkdocs_yaml` формирует YAML-конфигурацию на основе структуры документации, разделов, конфигураций и модулей. Вспомогательные функции строят иерархическую навигацию по модулям, а `write_docs_files` записывает сгенерированные документы в указанную директорию.

Ключевые структуры данных  
module_paths — список строк, представляющих пути к модулям в формате, подходящем для преобразования в древовидную навигацию  
tree — словарь, используемый для построения иерархической структуры навигации по модулям, где ключи — названия разделов, значения — либо строки (пути), либо вложенные словари

build_mkdocs_yaml(site_name: str, sections: Dict[str, str], configs: Dict[str, str], local_site: bool = False, has_modules: bool = False, module_nav_paths: List[str] | None = None) -> str  
Генерирует содержимое файла mkdocs.yml в формате YAML на основе входных параметров  
Аргументы  
site_name — название сайта документации  
sections — словарь включённых разделов (например, "architecture", "runtime") и соответствующих им имён файлов  
configs — словарь конфигурационных систем (например, "kubernetes", "helm") и имён их файлов  
local_site — если True, настраивает конфигурацию для локального просмотра (без site_url и с use_directory_urls=False)  
has_modules — указывает, что проект содержит модули, требующие раздела "Модули" в навигации  
module_nav_paths — список путей к файлам модулей для построения иерархической навигации  
Возвращает  
Строка в формате YAML, готовая для записи в mkdocs.yml  
Исключения  
Не выбрасывает исключения

---
_build_modules_nav(module_paths: List[str]) -> List[Dict[str, object]]  
Строит иерархическую структуру навигации по модулям на основе списка путей  
Аргументы  
module_paths — список путей к Markdown-файлам модулей  
Возвращает  
Список словарей, представляющих древовидную структуру навигации для раздела "Модули"  
Исключения  
Не выбрасывает исключения

---
_insert_nav_node(tree: Dict[str, object], parts: List[str], rel_path: str) -> None  
Рекурсивно вставляет узел в дерево навигации по частям пути  
Аргументы  
tree — изменяемый словарь, представляющий текущий уровень дерева навигации  
parts — список строк, представляющих части пути к файлу  
rel_path — полный относительный путь к файлу, который будет привязан к листу дерева  
Исключения  
Не выбрасывает исключения

---
_tree_to_nav(tree: Dict[str, object]) -> List[Dict[str, object]]  
Преобразует внутреннее дерево навигации в список словарей, пригодный для mkdocs.yml  
Аргументы  
tree — словарь с иерархической структурой навигации, построенный _insert_nav_node  
Возвращает  
Список словарей, где каждый словарь — это элемент навигации (раздел или файл)  
Исключения  
Не выбрасывает исключения

---
write_docs_files(docs_dir: Path, files: Dict[str, str]) -> None  
Записывает документационные файлы в указанную директорию, создавая промежуточные каталоги при необходимости  
Аргументы  
docs_dir — путь к директории, куда будут записаны файлы документации  
files — словарь, где ключ — относительный путь файла, значение — его содержимое в виде строки  
Исключения  
Может выбросить исключение при ошибках записи в файловую систему (например, PermissionError)
