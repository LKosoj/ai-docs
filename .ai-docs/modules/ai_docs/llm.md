# ai_docs/llm

```markdown
LLMClient — это модуль для взаимодействия с моделью крупного языка (LLM) через HTTP API, поддерживающий кэширование ответов и настройку параметров генерации. Он предоставляет удобный интерфейс для отправки чат-запросов и автоматически обрабатывает аутентификацию, сериализацию и парсинг ответов. Функция `from_env` упрощает создание клиента на основе переменных окружения.

Ключевые структуры данных
LLMClient — Клиент для взаимодействия с LLM API с поддержкой кэширования и настройкой параметров генерации

---
LLMClient.__init__(self, api_key: str, base_url: str, model: str, temperature: float = 0.2, max_tokens: int = 1200, context_limit: int = 8192)
Инициализирует клиент для работы с LLM API
Аргументы
api_key — Ключ API для аутентификации
base_url — Базовый URL API (с опциональным суффиксом /v1)
model — Идентификатор модели, используемой для генерации
temperature — Параметр температуры для контролирования случайности вывода (по умолчанию 0.2)
max_tokens — Максимальное количество токенов в ответе (по умолчанию 1200)
context_limit — Общий лимит токенов в контексте (по умолчанию 8192)

---
LLMClient._cache_key(self, payload: Dict) -> str
Генерирует хеш-ключ для кэширования на основе нормализованного JSON-представления полезной нагрузки
Аргументы
payload — Словарь с данными запроса
Возвращает
SHA-256 хеш строки JSON с отсортированными ключами

---
LLMClient.chat(self, messages: List[Dict[str, str]], cache: Optional[Dict[str, str]] = None) -> str
Отправляет запрос к чат-модели и возвращает сгенерированный ответ
Аргументы
messages — Список сообщений в формате {"role": "...", "content": "..."}
cache — Опциональный словарь для кэширования ответов (ключ — хеш запроса, значение — ответ)
Возвращает
Текст сгенерированного ответа от модели
Исключения
RuntimeError — Если ответ API не содержит ожидаемого поля с контентом
requests.HTTPError — Если HTTP-запрос завершился с ошибкой
requests.Timeout — Если превышено время ожидания ответа

---
from_env() -> LLMClient
Создаёт экземпляр LLMClient на основе переменных окружения
Возвращает
Настроенный экземпляр LLMClient
Исключения
RuntimeError — Если переменная окружения OPENAI_API_KEY не установлена
```
