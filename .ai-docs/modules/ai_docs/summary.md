# ai_docs/summary

Модуль предоставляет инструменты для генерации и обработки документации по исходному коду с использованием LLM. Основная функциональность включает создание кратких и детальных описаний файлов, нормализацию формата документации в соответствии с Doxygen-стилем и сохранение результатов в файловую систему. Поддерживается обработка больших файлов через чанкинг и кэширование запросов к LLM для оптимизации производительности.

Ключевые структуры данных  
llm_cache — словарь для кэширования ответов LLM по ключу запроса  
domains — список доменов, к которым относится файл (например, инфраструктура)

summarize_file(content: str, file_type: str, domains: List[str], llm_client, llm_cache: Dict[str, str], model: str, detailed: bool = False) -> str  
Генерирует краткое или детальное резюме содержимого файла с помощью LLM  
Аргументы  
content — исходное содержимое файла в виде строки  
file_type — тип файла (например, "infra", "source" и т.п.)  
domains — список доменов, к которым принадлежит файл  
llm_client — клиент для взаимодействия с языковой моделью  
llm_cache — словарь для кэширования ответов LLM  
model — модель LLM, используемая для генерации  
detailed — флаг, указывающий, нужно ли генерировать детальную документацию в стиле Doxygen  
Возвращает  
Сгенерированное резюме в виде строки, отформатированное в Markdown или Doxygen-стиль  
Исключения  
Отсутствуют

---  
_normalize_module_summary(summary: str, llm_client, llm_cache: Dict[str, str]) -> str  
Нормализует сгенерированное резюме модуля, приводя его к строгому Doxygen-формату  
Аргументы  
summary — исходный текст резюме, который может содержать неформатированные или лишние элементы  
llm_client — клиент для взаимодействия с языковой моделью  
llm_cache — словарь для кэширования ответов LLM  
Возвращает  
Отформатированный текст резюме, соответствующий Doxygen-стилю  
Исключения  
Отсутствуют

---  
write_summary(summary_dir: Path, rel_path: str, summary: str) -> Path  
Сохраняет сгенерированное резюме в файл Markdown в указанной директории  
Аргументы  
summary_dir — путь к директории для сохранения резюме  
rel_path — относительный путь к исходному файлу, используется для формирования имени выходного файла  
summary — текст резюме для сохранения  
Возвращает  
Путь к созданному файлу с резюме  
Исключения  
Отсутствуют
