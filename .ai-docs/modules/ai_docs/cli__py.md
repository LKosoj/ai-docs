# ai_docs/cli

/**
 * @brief Модуль для автоматической генерации документации (README и MkDocs) для репозиториев кода или конфигураций.
 *
 * Модуль объединяет сканирование исходных файлов, анализ содержимого с помощью LLM и генерацию документации
 * на заданном языке. Поддерживает кэширование, параллельную обработку и гибкую настройку включения/исключения файлов.
 * Работает как с локальными директориями, так и с удалёнными репозиториями по URL.
 *
 * Ключевые структуры данных
 * scan_result — Результат сканирования исходной директории, включая список файлов, корневую папку и имя репозитория
 */

---
parse_args() -> argparse.Namespace
Парсит аргументы командной строки для настройки генерации документации
Аргументы
--source — Путь к локальной папке или URL git-репозитория (обязательный)
--output — Корневая директория вывода (по умолчанию: source или ./output/<repo>)
--readme — Флаг генерации README.md
--mkdocs — Флаг генерации сайта документации в формате MkDocs
--language — Язык генерируемых документов (ru|en, по умолчанию: ru)
--include — Шаблоны включения файлов (glob, необязательно)
--exclude — Шаблоны исключения файлов (glob, необязательно)
--max-size — Максимальный размер файла в байтах (по умолчанию: 200 000)
--cache-dir — Директория кэша (по умолчанию: .ai_docs_cache)
--no-cache — Отключает кэширование ответов LLM
--threads — Количество параллельных потоков обработки LLM
--local-site — Генерировать конфигурацию MkDocs для локального запуска
--force — Перезаписывать существующий README.md
--regen — Список секций для перегенерации (например, architecture,configs,modules,index,changes)
Возвращает
Объект Namespace с распарсенными аргументами
Исключения
Может вызывать SystemExit при ошибке парсинга или отсутствии обязательных аргументов

---
resolve_output(source: str, output: Optional[str], repo_name: str) -> Path
Определяет итоговую директорию вывода для сгенерированной документации
Аргументы
source — Исходный путь (локальный или URL)
output — Указанный пользователем путь вывода, может отсутствовать
repo_name — Имя репозитория, используемое при генерации пути по умолчанию
Возвращает
Абсолютный путь к директории вывода
Исключения
Не выбрасывает исключения

---
main() -> None
Основная точка входа: загружает конфигурацию, сканирует исходники, инициализирует LLM и запускает генерацию документации
Аргументы
Нет (использует аргументы командной строки и переменные окружения)
Возвращает
Ничего
Исключения
Может выбросить исключение при ошибках сканирования, инициализации LLM или записи файлов
