# ai_docs/generator

/**
 * @brief Основной модуль генерации документации с использованием LLM.
 *
 * Модуль координирует процесс анализа исходных файлов, генерации и обновления
 * документации на основе изменений, кэширования промежуточных результатов
 * и построения финальной структуры документации (включая README и MkDocs).
 * Поддерживает асинхронную обработку, многопоточность и частичное обновление.
 *
 * Ключевые структуры данных
 * files — Список словарей с информацией о файлах (путь, содержимое и др.)
 * output_root — Корневая директория для вывода сгенерированной документации
 * cache_dir — Директория для хранения кэша (сводки, индексы, метаданные)
 * llm — Языковая модель, используемая для генерации текста документации
 * language — Язык документации (например, "en", "ru")
 */

---
async def _generate_docs_async(
    files: List[Dict],
    output_root: Path,
    cache_dir: Path,
    llm,
    language: str,
    write_readme_flag: bool,
    write_mkdocs: bool,
    use_cache: bool = True,
    threads: int = 1,
    local_site: bool = False,
    force: bool = False,
) -> None
Асинхронная основная логика генерации документации: анализ изменений, суммаризация, построение разделов и запись файлов.
Аргументы
files — Список файлов с метаданными для обработки
output_root — Корневая директория вывода документации
cache_dir — Директория кэша для хранения промежуточных данных
llm — Экземпляр языковой модели для генерации текста
language — Язык, на котором генерируется документация
write_readme_flag — Флаг, указывающий, нужно ли генерировать README
write_mkdocs — Флаг, указывающий, нужно ли обновлять конфигурацию MkDocs
use_cache — Использовать кэширование для ускорения повторной генерации
threads — Количество потоков для параллельной обработки
local_site — Режим локального сайта (влияет на структуру путей в MkDocs)
force — Принудительная перезапись README без проверки изменений
Возвращает
Ничего не возвращает
Исключения
Может выбрасывать исключения, связанные с I/O или работой LLM, которые накапливаются в списке errors

---
def generate_docs(
    files: List[Dict],
    output_root: Path,
    cache_dir: Path,
    llm,
    language: str,
    write_readme_flag: bool,
    write_mkdocs: bool,
    use_cache: bool = True,
    threads: int = 1,
    local_site: bool = False,
    force: bool = False,
) -> None
Синхронная точка входа для генерации документации; запускает асинхронный процесс через asyncio.run.
Аргументы
files — Список файлов с метаданными для обработки
output_root — Корневая директория вывода документации
cache_dir — Директория кэша
llm — Экземпляр языковой модели
language — Язык документации
write_readme_flag — Флаг генерации README
write_mkdocs — Флаг обновления MkDocs
use_cache — Использовать кэш
threads — Количество потоков обработки
local_site — Режим локального сайта
force — Принудительная перезапись README
Возвращает
Ничего не возвращает
Исключения
Передаёт исключения из _generate_docs_async
