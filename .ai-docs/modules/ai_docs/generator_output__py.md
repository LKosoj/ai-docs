# ai_docs/generator_output

```markdown
Модуль отвечает за генерацию и управление документацией проекта, включая создание файлов документации, индексацию, интеграцию с MkDocs и обслуживание статических ресурсов (например, Mermaid.js). 
Он координирует запись файлов документации, очистку устаревших файлов, построение конфигурации MkDocs и постобработку HTML-файлов после сборки сайта документации.
Поддерживает динамическое обновление содержимого с учётом изменений и управление дополнительными ассетами.

Ключевые структуры данных
docs_files — словарь, сопоставляющий относительные пути файлов документации с их содержимым в виде строки
file_map — словарь, описывающий структуру исходных файлов и модулей для генерации документации
module_pages — словарь путей к страницам документации модулей
config_pages — словарь путей к страницам документации конфигураций
configs_written — словарь записанных конфигурационных файлов для использования в mkdocs.yml

add_mermaid_asset(docs_files: Dict[str, str]) -> None
Добавляет Mermaid.js ассет в набор файлов документации, если он существует
Аргументы
docs_files — словарь файлов документации, куда будет добавлен ассет

---
write_docs(output_root: Path, docs_dir: Path, docs_files: Dict[str, str], file_map: Dict[str, Dict], module_pages: Dict[str, str], config_pages: Dict[str, str], has_changes: bool) -> None
Генерирует и записывает файлы документации, обновляет индекс, добавляет ассеты и очищает устаревшие файлы
Аргументы
output_root — корневая директория вывода
docs_dir — директория, куда записываются файлы документации
docs_files — словарь с путями и содержимым файлов документации
file_map — карта исходных файлов и модулей
module_pages — страницы документации модулей
config_pages — страницы документации конфигураций
has_changes — флаг наличия изменений в исходных данных
Исключения
Может вывести предупреждение при отсутствии Mermaid.js

---
write_readme(output_root: Path, readme: str, force: bool) -> None
Записывает README.md в корневую директорию, если он не существует или установлен флаг force
Аргументы
output_root — корневая директория вывода
readme — содержимое README в виде строки
force — если True, перезаписывает существующий файл

---
build_mkdocs(output_root: Path, module_nav_paths: List[str], config_nav_paths: List[str], configs_written: Dict[str, str], write_mkdocs: bool, local_site: bool) -> None
Генерирует mkdocs.yml и собирает сайт документации с помощью MkDocs
Аргументы
output_root — корневая директория проекта
module_nav_paths — пути к страницам модулей для навигации
config_nav_paths — пути к страницам конфигураций для навигации
configs_written — словарь записанных конфигурационных страниц
write_mkdocs — если True, выполняется генерация mkdocs.yml и сборка сайта
local_site — если True, настраивает сайт для локального размещения
Исключения
RuntimeError — если mkdocs не установлен и не найден в PATH

---
_postprocess_mermaid_html(site_dir: Path) -> None
Выполняет постобработку HTML-файлов сайта: заменяет &gt; на > в блоках Mermaid для корректного отображения
Аргументы
site_dir — директория собранного сайта документации

---
__serialize_index(index: Dict[str, object]) -> str
Сериализует индекс документации в JSON с добавлением временной метки и метаинформации
Аргументы
index — словарь с данными индекса документации
Возвращает
Строка в формате JSON с дополненной информацией о времени генерации и правилах ранжирования
```
