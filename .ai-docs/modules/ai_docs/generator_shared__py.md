# ai_docs/generator_shared

Модуль предоставляет инструменты для анализа структуры проекта, сбора информации о зависимостях, тестах и конфигурационных файлах, а также генерации навигационных структур и описаний для документации.  
Основан на анализе содержимого файлов, метаданных и путей, поддерживает различные форматы (TOML, JSON, текст).  
Используется для автоматизации создания и обновления документации по проекту.

Ключевые структуры данных  
SECTION_TITLES — Словарь соответствия идентификаторов разделов и их локализованных заголовков.  
DOMAIN_TITLES — Словарь соответствия доменов (технологий) и их отображаемых названий.

is_test_path(path: str) -> bool  
Проверяет, является ли путь тестовым по имени или расположению.  
Аргументы  
path — путь к файлу или директории для проверки  
Возвращает  
True, если путь соответствует шаблонам тестовых файлов или директорий

---  
collect_dependencies(files: Dict[str, Dict]) -> List[str]  
Собирает список зависимостей проекта из pyproject.toml, requirements.txt и package.json.  
Аргументы  
files — словарь файлов с метаданными, включая путь и содержимое  
Возвращает  
Отсортированный список уникальных строк с зависимостями в формате "имя версия"

---  
collect_test_info(files: Dict[str, Dict]) -> Tuple[List[str], List[str]]  
Собирает информацию о тестовых файлах и командах запуска тестов.  
Аргументы  
files — словарь файлов с метаданными  
Возвращает  
Кортеж из двух списков: путей к тестовым файлам и команд для запуска тестов

---  
render_testing_section(test_paths: List[str], commands: List[str]) -> str  
Формирует Markdown-секцию с информацией о тестах и способах их запуска.  
Аргументы  
test_paths — список путей к тестовым файлам  
commands — список команд для запуска тестов  
Возвращает  
Строка в формате Markdown с заголовками и списками тестов и команд

---  
render_project_configs_index(config_nav_paths: List[str]) -> str  
Генерирует Markdown-оглавление для конфигурационных файлов.  
Аргументы  
config_nav_paths — список путей к конфигурационным файлам  
Возвращает  
Строка в формате Markdown со списком ссылок на конфигурационные файлы

---  
strip_duplicate_heading(content: str, title: str) -> str  
Удаляет первый заголовок из текста, если он дублирует указанный заголовок.  
Аргументы  
content — исходный текст (например, содержимое файла)  
title — ожидаемый заголовок, дублирование которого следует удалить  
Возвращает  
Текст без первого заголовка, если он совпадает с title (с учётом регистра и пробелов)

---  
first_paragraph(text: str) -> str  
Извлекает первый абзац текста, пропуская заголовки и блоки кода.  
Аргументы  
text — входной текст для обработки  
Возвращает  
Первый абзац текста как строка, объединённая из непустых строк до пустой строки или конца

---  
build_docs_index(docs_dir: Path, docs_files: Dict[str, str], file_map: Dict[str, Dict], section_titles: Dict[str, str]) -> Dict[str, object]  
Формирует индекс документации: разделы, модули, конфигурации и список файлов.  
Аргументы  
docs_dir — путь к директории с документацией  
docs_files — словарь новых файлов документации (путь → содержимое)  
file_map — карта файлов проекта с метаданными  
section_titles — словарь заголовков разделов  
Возвращает  
Словарь с ключами "sections", "modules", "configs", "files", содержащий структуру навигации и метаданные
