# Зависимости

```markdown
# Зависимости

## Основные внешние зависимости

Инструмент `ai_docs` требует следующие сторонние пакеты Python для работы:

| Пакет | Назначение | Обязательность |
|------|-----------|---------------|
| `tiktoken` | Подсчёт и разбиение текста на токены для LLM | Да |
| `pathspec` | Корректная обработка паттернов из `.gitignore` | Да |
| `requests` | HTTP-запросы к API LLM | Да |
| `PyYAML` | Генерация `mkdocs.yml` | Да |
| `python-dotenv` | Загрузка переменных окружения из `.env` | Да |

Установка всех зависимостей выполняется через:
```bash
pip install ai_docs
```

## Опциональные зависимости

- **`mkdocs`** — необходим для сборки статического сайта (`mkdocs build`). Устанавливается автоматически при генерации сайта, если отсутствует.
- **`git`** — требуется при обработке удалённых репозиториев (`--source https://...`). Проверяется на этапе выполнения.

## Системные требования

- Python 3.9+
- Доступ к LLM API (например, OpenAI, или совместимый через `OPENAI_BASE_URL`)
- Свободное место на диске для кэширования (`.ai_docs_cache/`, временные директории)

## Управление зависимостями в проекте

Инструмент автоматически распознаёт и анализирует файлы зависимостей в проекте:

| Тип | Поддерживаемые файлы | Извлекаемая информация |
|-----|------------------------|------------------------|
| Python | `requirements.txt`, `pyproject.toml`, `Pipfile` | Список пакетов и версий |
| Node.js | `package.json` | `dependencies`, `devDependencies` |
| Terraform | `.tf`, `.tfvars` | Используемые провайдеры, модули |
| Ansible | `requirements.yml` | Роли и коллекции |
| Helm | `Chart.yaml` | Зависимости чарта |

Информация включается в раздел **Зависимости** документации при генерации.

## Переменные окружения

Конфигурация LLM и поведения задаётся через `.env` или переменные среды:

```env
# Обязательно
OPENAI_API_KEY=sk-...

# Опционально
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_MODEL=gpt-4o-mini
OPENAI_TEMPERATURE=0.2
OPENAI_MAX_TOKENS=1200
OPENAI_CONTEXT_TOKENS=8192

# Поведение инструмента
AI_DOCS_THREADS=4
AI_DOCS_LOCAL_SITE=true
```

## Ограничения и совместимость

- Поддержка LLM: OpenAI-совместимые API (через `base_url`).
- Форматы конфигурации: YAML, JSON, TOML, `.env`.
- Файлы > 200 КБ по умолчанию не анализируются (настраивается через `--max-size`).
- Бинарные файлы автоматически исключаются.
```
